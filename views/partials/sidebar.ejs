<% const active = typeof activePage !== 'undefined' ? activePage : ''; %>
<aside class="sidebar" id="sidebar">
  <div class="sidebar__head">
    <a href="/dashboard" class="sidebar__brand">Portal-01</a>
    <button type="button" class="sidebar__close" id="sidebarClose" aria-label="Chiudi">×</button>
  </div>
  <nav class="sidebar__nav">
    <a href="/dashboard" class="sidebar__link <%= active === 'dashboard' ? 'active' : '' %>">Dashboard</a>
    <a href="/ferie" class="sidebar__link <%= active === 'ferie' ? 'active' : '' %>">Ferie</a>
    <a href="/admin/users" class="sidebar__link <%= active === 'admin' ? 'active' : '' %>">Gestione Utenti</a>
    <a href="/profile" class="sidebar__link <%= active === 'profile' ? 'active' : '' %>">Profilo</a>
  </nav>
  <div class="sidebar__foot">
    <% if (user) { %><p class="sidebar__user"><%= user.full_name %></p><% } %>
    <a href="/auth/logout" class="sidebar__link logout">Esci</a>
  </div>
</aside>
<button type="button" class="sidebar__toggle" id="sidebarToggle" aria-label="Menu">☰</button>
<div class="sidebar__backdrop" id="sidebarBackdrop"></div>
<script>
(function(){
  var s=document.getElementById('sidebar'),t=document.getElementById('sidebarToggle'),c=document.getElementById('sidebarClose'),b=document.getElementById('sidebarBackdrop');
  if(!s||!t)return;
  function open(){s.classList.add('open');if(b)b.classList.add('open');}
  function close(){s.classList.remove('open');if(b)b.classList.remove('open');}
  t.onclick=open;if(c)c.onclick=close;if(b)b.onclick=close;
})();
</script>
